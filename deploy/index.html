<!doctype html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#5a2bd6"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AtasÃ¶zÃ¼ Oyunu">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="icon-512.png" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3)">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="TÃ¼rk atasÃ¶zlerini ve deyimlerini eÄŸlenceli oyunlarla Ã¶ÄŸrenin. Eksik kelime bulma, Ã§oktan seÃ§meli ve eÅŸleÅŸtirme modlarÄ±yla TÃ¼rkÃ§e dil becerilerinizi geliÅŸtirin.">
    <meta name="keywords" content="atasÃ¶zleri, deyimler, tÃ¼rkÃ§e, eÄŸitim, oyun, Ã¶ÄŸrenme">
    <meta name="author" content="AtasÃ¶zleri Oyunu">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="icon-152.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icon-72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="icon-96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="icon-128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icon-144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon-152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" sizes="384x384" href="icon-384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.png">
    <title>AtasÃ¶zleri ve Deyimler Ã–ÄŸrenme Oyunu</title>
    
    <!-- AdSense DNS Prefetch (Performans iÃ§in) -->
    <link rel="preconnect" href="https://pagead2.googlesyndication.com">
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
    
    <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register("service-worker.js");
            });
        }
    </script>
    
    <link rel="stylesheet" href="style.css">
    
    <!-- AdSense YapÄ±landÄ±rma ve YÃ¶netim ModÃ¼lleri -->
    <script src="adsense-config.js"></script>
    <script src="adsense-manager.js"></script>
</head>
<body>
    <div class="container">
        <!-- Ana MenÃ¼ -->
        <div id="mainMenu" class="screen active">
            <!-- Panda -->
            <div class="hero-section">
                <img src="panda-normal.png" alt="Panda" class="panda" id="pandaAvatar">
                <h1 class="main-title">AtasÃ¶zleri<br>Deyimler Oyunu</h1>
                <p class="welcome-text">Merhaba! Ben senin Ã¶ÄŸrenme arkadaÅŸÄ±nÄ±m<br>Hadi birlikte atasÃ¶zlerini Ã¶ÄŸrenelim!</p>
            </div>
            
            <!-- Ses ve Skor ButonlarÄ± -->
            <div class="control-buttons">
                <button class="btn-outlined" id="soundBtn" type="button">
                    ğŸ”Š Ses AÃ§Ä±k
                </button>
                <button class="btn-outlined" onclick="showLeaderboard()">
                    ğŸ† Skor Tablosu
                </button>
            </div>
            
            <!-- Oyun ModlarÄ± -->
            <div class="game-modes">
                <button class="game-btn" onclick="startGame('fillBlank')">ğŸ§© Deyimler Eksik Kelimeler</button>
                <button class="game-btn" onclick="startGame('multipleChoice')">ğŸ“˜ Ã‡oktan SeÃ§meli</button>
                <button class="game-btn" onclick="startGame('matching')">ğŸ”— EÅŸleÅŸtirme</button>
            </div>
            
            <!-- Alt Butonlar: Bilgi ve GiriÅŸ Yap -->
            <div class="bottom-buttons">
                <button class="btn-outlined" onclick="showInfo()">ğŸ’ Bilgi</button>
                <button class="btn-outlined" onclick="showLogin()">ğŸ”’ GiriÅŸ Yap</button>
            </div>
            
            <!-- Reklam Container - Ana MenÃ¼ -->
            <div id="ad-main-menu" class="ad-container"></div>
            
            <!-- Alt Toggle -->
            <div class="bottom-toggle">
                <div class="toggle-switch" id="mainToggle" onclick="toggleSwitch()"></div>
            </div>
        </div>

        <!-- Oyun EkranÄ± -->
        <div id="gameScreen" class="screen">
            <header class="top-bar">
                <div class="pill pill-time">â±ï¸ <span id="timerDisplay">180</span></div>
                <div class="pill pill-score">ğŸ“ Puan: <span id="currentScore">0</span></div>
                <div class="pill pill-streak">ğŸ”¥ Seri: <span id="streak">0</span></div>
                <div class="pill pill-difficulty">â­ Seviye: <span id="difficultyLevel">1</span></div>
                <div class="pill pill-wrong">âŒ <span id="wrongCount">0</span>/5</div>
            </header>

            <main class="game-card" id="gameCard">
                
                <!-- Oyun EkranÄ± Panda -->
                <div style="text-align: center; margin-bottom: 15px;">
                    <img src="panda-normal.png" alt="Panda" id="gamePanda" style="width: 180px; filter: drop-shadow(0 4px 8px rgba(0,0,0,.3));">
                </div>
                
                <div class="card-header">
                    <div class="question-badge">
                        ğŸ“‹ Soru <span id="questionNumber">1</span>
                    </div>
                    <div class="game-mode-badge" id="gameModeBadge">Ã‡oktan SeÃ§meli</div>
                </div>
                
                <div class="question-text" id="questionText">Soru yÃ¼kleniyor...</div>
                <div class="question-hint">Bir ÅŸÄ±k seÃ§.</div>
                
                <div class="answers-container" id="optionsContainer"></div>
                
                <footer class="card-footer">
                    <button class="icon-btn" id="helpBtn" onclick="showHelp()">?</button>
                    <button class="icon-btn" id="exitBtn" onclick="backToMenu()">ğŸšª</button>
                </footer>
            </main>
        </div>

        <!-- Skor Tablosu EkranÄ± -->
        <div id="leaderboardScreen" class="screen">
            <img src="panda-mutlu.png" alt="Mutlu Panda" class="leaderboard-panda">
            <h2 class="leaderboard-title">Skor Tablosu</h2>
            
            <div class="leaderboard-content">
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" onclick="showLeaderboardTab(event, 'all')">TÃ¼m Zamanlar</button>
                    <button class="tab-btn" onclick="showLeaderboardTab(event, 'today')">BugÃ¼n</button>
                    <button class="tab-btn" onclick="showLeaderboardTab(event, 'week')">Bu Hafta</button>
                </div>
                <div id="leaderboardList" class="leaderboard-list"></div>
            </div>
            
            <!-- Reklam Container - Skor Tablosu -->
            <div id="ad-leaderboard" class="ad-container"></div>
            
            <button class="btn-start" onclick="backToMenu()">Ana MenÃ¼ye DÃ¶n</button>
        </div>
    </div>

    <!-- Sound Panel (Popover) -->
    <div id="soundPanelBackdrop" class="sound-panel-backdrop" aria-hidden="true"></div>
    <div id="soundPanel" class="sound-panel" role="dialog" aria-modal="false" aria-label="Ses AyarlarÄ±">
        <div class="sound-panel-header">
            <div class="sound-panel-title">Ses AyarlarÄ±</div>
            <button id="soundPanelClose" class="sound-panel-close" aria-label="Kapat" type="button">âœ•</button>
        </div>
        
        <div class="sound-panel-row">
            <span id="soundPanelStateText" class="sound-panel-state">AÃ§Ä±k</span>
            <button id="soundPanelToggle" class="sound-panel-toggle" type="button" aria-label="Sesi AÃ§/Kapat">ğŸ”Š</button>
        </div>
        
        <div class="sound-panel-row">
            <label for="volumeRange" class="sound-panel-label">Ses Åiddeti</label>
            <input 
                id="volumeRange"
                class="sound-panel-range"
                type="range"
                min="0" 
                max="100" 
                step="1"
                aria-label="Ses ÅŸiddeti"
            />
            <span id="volumeValue" class="sound-panel-value">50</span>
        </div>
        
        <button id="soundTestBtn" class="sound-panel-test" type="button">Test Sesi</button>
    </div>

    <!-- Ä°sim GiriÅŸi Modal -->
    <div id="nameModal" class="modal">
        <div class="modal-content welcome-modal">
            <img src="panda-mutlu.png" alt="Mutlu Panda" class="modal-panda">
            <h2 class="modal-title">HoÅŸ Geldin!</h2>
            <p class="modal-text">Hadi tanÄ±ÅŸalÄ±m! Ä°smin nedir?</p>
            <input type="text" id="playerNameInput" class="name-input" placeholder="Ä°smini yaz..." maxlength="20">
            <button class="btn-start" onclick="submitName()">BaÅŸla! ğŸš€</button>
        </div>
    </div>

    <!-- Bilgi Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content welcome-modal">
            <img src="panda-mutlu.png" alt="Mutlu Panda" class="modal-panda">
            <h2 class="modal-title">Oyun NasÄ±l OynanÄ±r?</h2>
            
            <div class="info-content">
                <div class="info-section">
                    <div class="info-icon">ğŸ§©</div>
                    <div class="info-text">
                        <h3>Deyimler Eksik Kelimeler</h3>
                        <p>Deyimdeki eksik kelimeyi bul!</p>
                    </div>
                </div>
                
                <div class="info-section">
                    <div class="info-icon">ğŸ“˜</div>
                    <div class="info-text">
                        <h3>Ã‡oktan SeÃ§meli</h3>
                        <p>AnlamÄ±na gÃ¶re doÄŸru atasÃ¶zÃ¼nÃ¼ seÃ§!</p>
                    </div>
                </div>
                
                <div class="info-section">
                    <div class="info-icon">ğŸ”—</div>
                    <div class="info-text">
                        <h3>EÅŸleÅŸtirme</h3>
                        <p>Deyimi anlamÄ±yla eÅŸleÅŸtir!</p>
                    </div>
                </div>
                
                <div class="info-divider"></div>
                
                <div class="info-rules">
                    <div class="info-rule">
                        <span class="rule-icon">â±ï¸</span>
                        <span>SÃ¼re: 180-240 saniye</span>
                    </div>
                    <div class="info-rule">
                        <span class="rule-icon">âŒ</span>
                        <span>5 yanlÄ±ÅŸ yapÄ±nca oyun biter</span>
                    </div>
                    <div class="info-rule">
                        <span class="rule-icon">ğŸ”¥</span>
                        <span>Seri yaparak bonus puan kazan!</span>
                    </div>
                    <div class="info-rule">
                        <span class="rule-icon">âœ…</span>
                        <span>DoÄŸru cevap: +1 saniye bonus</span>
                    </div>
                    <div class="info-rule">
                        <span class="rule-icon">âš ï¸</span>
                        <span>YanlÄ±ÅŸ cevap: -15 saniye ceza</span>
                    </div>
                </div>
            </div>
            
            <button class="btn-start" onclick="closeInfo()">AnladÄ±m! ğŸš€</button>
        </div>
    </div>

    <!-- GiriÅŸ Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content welcome-modal">
            <img src="panda-mutlu.png" alt="Mutlu Panda" class="modal-panda">
            <h2 class="modal-title">GiriÅŸ Yap</h2>
            <p class="modal-text">SkorlarÄ±nÄ± kaydetmek iÃ§in giriÅŸ yap!</p>
            
            <div class="login-buttons">
                <button class="btn-start" onclick="signInWithGoogle()">
                    ğŸ”µ Google ile GiriÅŸ Yap
                </button>
                <button class="btn-start" onclick="signInAsGuest()">
                    ğŸ‘¤ Misafir Olarak Devam Et
                </button>
                <button class="btn-start" style="opacity: 0.7;" onclick="closeLoginModal()">
                    âŒ Ä°ptal
                </button>
            </div>
        </div>
    </div>

    <!-- KullanÄ±cÄ± MenÃ¼ Modal -->
    <div id="userMenuModal" class="modal">
        <div class="modal-content welcome-modal">
            <img src="panda-mutlu.png" alt="Mutlu Panda" class="modal-panda">
            <h2 class="modal-title" id="userMenuTitle">KullanÄ±cÄ±</h2>
            <p class="modal-text" id="userMenuEmail"></p>
            
            <div class="login-buttons">
                <button class="btn-start" onclick="handleSignOut()">
                    ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
                </button>
                <button class="btn-start" style="opacity: 0.7;" onclick="closeUserMenu()">
                    âŒ Ä°ptal
                </button>
            </div>
        </div>
    </div>

    <!-- Oyun BitiÅŸi Modal -->
    <div id="gameOverModal" class="modal">
        <div class="modal-content game-over-modal">
            <div id="confetti"></div>
            <img src="panda-mutlu.png" alt="Panda" class="modal-panda" id="resultMascot">
            <h2 class="modal-title" id="resultTitle">Tebrikler!</h2>
            <p class="modal-text" id="resultMessage">Harika bir performans!</p>
            
            <div class="result-stats-grid">
                <div class="stat-box">
                    <div class="stat-icon">ğŸ†</div>
                    <div class="stat-value" id="finalScore">0</div>
                    <div class="stat-label">Puan</div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-value" id="finalCorrect">0</div>
                    <div class="stat-label">DoÄŸru</div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">âŒ</div>
                    <div class="stat-value" id="finalWrong">0</div>
                    <div class="stat-label">YanlÄ±ÅŸ</div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-value" id="finalStreak">0</div>
                    <div class="stat-label">En YÃ¼ksek Seri</div>
                </div>
            </div>
            
            <!-- Reklam Container - Oyun BitiÅŸi Modal -->
            <div id="ad-game-over" class="ad-container-modal"></div>
            
            <div class="modal-buttons">
                <button class="btn-start" onclick="restartGame()">ğŸ”„ Tekrar Oyna</button>
                <button class="btn-start" onclick="closeGameOver()">ğŸ  Ana MenÃ¼</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/App.js"></script>
    <script type="module" src="firebase-config.js"></script>
</body>
</html>
